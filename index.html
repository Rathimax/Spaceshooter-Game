<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Space Shooter</title>
    <meta name="description"
        content="An exciting space shooter game with boss battles, power-ups, and endless mode. Use keyboard or touch controls to defeat alien invaders!">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <script src="app.js" defer></script>
</head>

<body>
    <!-- Tutorial Overlay (first-time players) -->
    <div id="tutorial-overlay" style="display: none;">
        <div class="tutorial-content">
            <h2>Welcome, Pilot!</h2>
            <div class="tutorial-section">
                <h3>üéÆ Controls</h3>
                <div class="tutorial-controls">
                    <div><span class="key">WASD</span> or <span class="key">Arrow Keys</span> Move</div>
                    <div><span class="key">SPACE</span> Shoot</div>
                    <div><span class="key">Q</span> Homing Rockets</div>
                    <div><span class="key">E</span> Laser Beam</div>
                    <div><span class="key">P</span> Pause</div>
                    <div><span class="key">R</span> Restart</div>
                </div>
            </div>
            <div class="tutorial-section">
                <h3>üí° Tips</h3>
                <ul>
                    <li>Collect power-ups dropped by enemies</li>
                    <li>Prepare for boss battles!</li>
                    <li>Higher difficulty = more points</li>
                </ul>
            </div>
            <button onclick="closeTutorial()">Got it!</button>
            <label class="tutorial-checkbox">
                <input type="checkbox" id="dont-show-again" checked>
                Don't show this again
            </label>
        </div>
    </div>
    <main id="game-container">
        <div id="board">
            <div id="jet">
                <div id="jet-flare"></div>
                <div id="shield-effect" style="display: none;"></div>
            </div>
            <div id="boss" style="display: none;"></div>
        </div>
        <div id="ui-layer">
            <div id="game-header" style="visibility: hidden;">
                <div id="lives">Lives: <span id="lives-value">3</span></div>
                <div id="score">Score: <span id="score-value">0</span></div>
                <div id="wave-display" style="display: none;">Wave: <span id="wave-value">1</span></div>
            </div>
            <div id="weapon-hud" style="visibility: hidden;">Laser</div>
            <div id="points">0</div>
            <div id="boss-health-container" style="display: none;">
                <div id="boss-health-bar"></div>
            </div>

            <div id="boss-alert" style="display: none;"></div>

            <!-- Container for Power-up Status Bars -->
            <div id="powerup-bars-container"></div>


            <div class="screen" id="start-screen">
                <h2>Space Shooter</h2>
                <p id="high-score-start" class="high-score-text">High Score: 0</p>
                <p>Select Difficulty (Classic Mode)</p>
                <div class="difficulty-buttons">
                    <button onclick="startGame('easy', 'classic')">Easy</button>
                    <button onclick="startGame('medium', 'classic')">Medium</button>
                    <button onclick="startGame('hard', 'classic')">Hard</button>
                </div>
                <p style="margin-top: 25px;">Or Try Endless Mode</p>
                <div class="difficulty-buttons">
                    <button onclick="startGame('medium', 'endless')">Endless</button>
                </div>
                <div id="desktop-instructions">
                    <div><span>WASD/&larr;&uarr;&darr;&rarr;</span> Move</div>
                    <div><span>SPACE</span> Shoot</div>
                    <div><span>Q/E</span> Abilities</div>
                    <div><span>P</span> Pause</div>
                </div>
                <div id="mobile-instructions" style="display:none;">
                    <p>Use the joystick to move and buttons to shoot!</p>
                </div>
                <button class="settings-button" onclick="openSettings()">‚öô Settings</button>
                <button class="shop-button" onclick="openShop()">üõí Shop</button>
            </div>
            <!-- Shop Screen -->
            <div class="screen" id="shop-screen" style="display: none;">
                <h2>üõí Ship Upgrades</h2>
                <div class="shop-coins">ü™ô <span id="coin-display">0</span></div>
                <div class="shop-grid">
                    <div class="shop-item">
                        <div class="item-name">‚ö° Speed Boost</div>
                        <div class="item-desc">+10% movement speed</div>
                        <div class="item-level" id="level-speed">Lv.0/3</div>
                        <button id="upgrade-speed" onclick="purchaseUpgrade('speed')">100 ü™ô</button>
                    </div>
                    <div class="shop-item">
                        <div class="item-name">üí• Power Shot</div>
                        <div class="item-desc">+1 base damage</div>
                        <div class="item-level" id="level-damage">Lv.0/3</div>
                        <button id="upgrade-damage" onclick="purchaseUpgrade('damage')">150 ü™ô</button>
                    </div>
                    <div class="shop-item">
                        <div class="item-name">‚ù§Ô∏è Extra Life</div>
                        <div class="item-desc">+1 starting life</div>
                        <div class="item-level" id="level-lives">Lv.0/2</div>
                        <button id="upgrade-lives" onclick="purchaseUpgrade('lives')">200 ü™ô</button>
                    </div>
                    <div class="shop-item">
                        <div class="item-name">üöÄ Missiles</div>
                        <div class="item-desc">+2 missile ammo</div>
                        <div class="item-level" id="level-missiles">Lv.0/3</div>
                        <button id="upgrade-missiles" onclick="purchaseUpgrade('missiles')">100 ü™ô</button>
                    </div>
                </div>
                <button class="back-button" onclick="closeShop()">Back</button>
            </div>
            <!-- Settings Screen -->
            <div class="screen" id="settings-screen">
                <h2>Settings</h2>
                <div class="settings-grid">
                    <div class="setting-row">
                        <span class="setting-label">Sound</span>
                        <button id="sound-toggle" class="setting-toggle active" onclick="toggleSound()"></button>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Screen Shake</span>
                        <button id="shake-toggle" class="setting-toggle active" onclick="toggleShake()"></button>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Show FPS</span>
                        <button id="fps-toggle" class="setting-toggle" onclick="toggleFps()"></button>
                    </div>
                </div>
                <button class="back-button" onclick="closeSettings()">Back</button>
            </div>
            <div class="screen" id="game-over" style="display: none;">
                <h2>Game Over</h2>
                <p>Final Score: <span id="final-score">0</span></p>
                <p class="high-score-text">High Score: <span id="high-score-display">0</span></p>
                <button onclick="restartGame()">Restart</button>
            </div>
            <div class="screen" id="win-screen" style="display: none;">
                <h2>You Win!</h2>
                <p>You have defeated the boss.</p>
                <p>Final Score: <span id="final-score-win">0</span></p>
                <button onclick="restartGame()">Play Again</button>
            </div>
            <div class="screen" id="pause-screen" style="display: none;">
                <h2>Paused</h2>
                <div class="pause-menu-buttons">
                    <button onclick="togglePause()">Resume</button>
                    <button onclick="restartGame()">Restart</button>
                    <button onclick="openPauseSettings()">Settings</button>
                    <button onclick="quitToMenu()">Quit to Menu</button>
                </div>
                <p class="pause-hint">Press P to resume ‚Ä¢ R to restart</p>
            </div>
            <div id="desktop-abilities">
                <div class="powerup" id="homing-rocket-powerup">
                    <div class="powerup-key">üöÄ</div>
                    <div class="powerup-status">ROCKETS (Q)</div>
                </div>
                <div class="powerup" id="laser-beam-powerup">
                    <div class="powerup-key">‚ö°</div>
                    <div class="powerup-status">LASER (E)</div>
                </div>
            </div>
            <div id="touch-controls" style="display: none;">
                <div id="joystick-container">
                    <div id="joystick-base"></div>
                    <div id="joystick-stick"></div>
                </div>
                <div class="right-controls">
                    <button id="pause-button" class="mobile-pause-button">‚è∏</button>
                    <div class="powerup-touch-controls">
                        <button id="laser-button" class="powerup-button" disabled>‚ö°</button>
                        <button id="rocket-button" class="powerup-button" disabled>üöÄ</button>
                    </div>
                    <button id="fire-button"></button>
                </div>
            </div>
        </div>
    </main>
    <!-- Audio Elements -->
    <audio id="shoot-sound" src="shoot.mp3"></audio>
    <audio id="explosion-sound" src="explosion.mp3"></audio>
    <audio id="bgm-music" src="music.mp3" loop></audio>
    <audio id="boss-music" src="boss-music.mp3" loop></audio>
    <audio id="powerup-sound" src="powerup.mp3"></audio>
    <audio id="levelup-sound" src="levelup.mp3"></audio>
    <audio id="gameover-sound" src="gameover.mp3"></audio>
    <audio id="laser-fire-sound" src="laser_fire.wav" preload="auto"></audio>
    <audio id="laser-charge-sound" src="laser_charge.wav" preload="auto"></audio>
    <audio id="rocket-launch-sound" src="rocket_launch.wav" preload="auto"></audio>
    <audio id="powerup-collect-sound" src="powerup.wav" preload="auto"></audio>
    <audio id="shield-break-sound" src="shield_break.wav" preload="auto"></audio>
</body>

</html>